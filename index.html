<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Merry Christmas</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&family=Great+Vibes&family=Montserrat:wght@300;400&display=swap" rel="stylesheet">

<style>
html,body{
    margin:0;
    padding:0;
    width:100%;
    height:100%;
    overflow:hidden;
    background:radial-gradient(circle at top,#1a2a3a,#050608);
    font-family:'Montserrat',sans-serif;
}
canvas{
    position:fixed;
    inset:0;
}
#gift{
    position:absolute;
    bottom:10%;
    left:50%;
    transform:translateX(-50%);
    width:140px;
    height:140px;
    cursor:pointer;
    z-index:5;
    animation:float 3s ease-in-out infinite;
}
@keyframes float{
    0%,100%{transform:translate(-50%,0)}
    50%{transform:translate(-50%,-20px)}
}
#gift .box{
    width:100%;
    height:100%;
    background:linear-gradient(135deg,#7a0000,#c1121f);
    border-radius:16px;
    box-shadow:0 0 50px rgba(255,0,0,.7);
}
#gift::before,#gift::after{
    content:'';
    position:absolute;
    background:#ffd166;
}
#gift::before{width:100%;height:18px;top:60px}
#gift::after{width:18px;height:100%;left:60px}

#card{
    position:fixed;
    inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
    background:rgba(0,0,0,.75);
    opacity:0;
    pointer-events:none;
    transition:1.5s;
    z-index:10;
}
#card.show{opacity:1;pointer-events:auto}

.card{
    width:560px;
    padding:60px;
    background:linear-gradient(135deg,#fff,#fdf0d5);
    border-radius:30px;
    box-shadow:0 60px 140px rgba(0,0,0,.5);
    text-align:center;
    color:#333;
    position:relative;
}
.card::before{
    content:'';
    position:absolute;
    inset:-4px;
    border-radius:34px;
    background:linear-gradient(45deg,#ffd166,#ef476f,#ffd166);
    z-index:-1;
    animation:glow 10s linear infinite;
}
@keyframes glow{
    0%{filter:hue-rotate(0deg)}
    100%{filter:hue-rotate(360deg)}
}
.title{
    font-family:'Great Vibes',cursive;
    font-size:58px;
    color:#c1121f;
    margin-bottom:20px;
}
.name{
    font-family:'Playfair Display',serif;
    font-size:22px;
    margin-bottom:25px;
}
.message{
    font-size:16px;
    line-height:1.9;
    white-space:pre-line;
    min-height:200px;
}
</style>
</head>

<body>

<canvas id="canvas"></canvas>

<div id="gift">
    <div class="box"></div>
</div>

<div id="card">
    <div class="card">
        <div class="title">Merry Christmas</div>
        <div class="name">Gá»­i Nguyá»…n Pháº¡m LÃ¢m Vy</div>
        <div id="text" class="message"></div>
    </div>
</div>

<audio id="music" loop>
<source src="https://cdn.pixabay.com/audio/2022/11/22/audio_1b1e6c8c1f.mp3">
</audio>

<script>
/* ================= CORE ================= */
const canvas=document.getElementById('canvas');
const ctx=canvas.getContext('2d');
function resize(){
    canvas.width=innerWidth;
    canvas.height=innerHeight;
}
resize();
addEventListener('resize',resize);

/* ================= SNOW ================= */
const snow=[];
for(let i=0;i<500;i++){
    snow.push({
        x:Math.random()*canvas.width,
        y:Math.random()*canvas.height,
        z:Math.random(),
        r:Math.random()*3+1,
        s:Math.random()*1.5+0.3
    });
}

/* ================= TREE DATA (3D FAKE) ================= */
let grow=0;
const layers=[];
for(let i=0;i<140;i++){
    layers.push({
        y:i,
        depth:Math.random()*0.6+0.4,
        offset:Math.random()*Math.PI*2
    });
}

/* ================= DRAW ================= */
function drawSnow(){
    snow.forEach(s=>{
        const speed=s.s*(0.5+s.z);
        s.y+=speed;
        s.x+=Math.sin(s.y*0.01)*0.3;
        ctx.fillStyle=`rgba(255,255,255,${0.3+s.z})`;
        ctx.beginPath();
        ctx.arc(s.x,s.y,s.r*(0.5+s.z),0,Math.PI*2);
        ctx.fill();
        if(s.y>canvas.height){
            s.y=-10;
            s.x=Math.random()*canvas.width;
        }
    });
}

function drawTree3D(){
    const cx=canvas.width/2;
    const base=canvas.height*0.78;
    ctx.save();
    ctx.lineCap='round';
    for(let i=0;i<grow;i++){
        const l=layers[i];
        const y=base-l.y*4;
        const width=(220-l.y*1.4)*l.depth;
        const sway=Math.sin(Date.now()*0.001+l.offset)*6*l.depth;

        ctx.strokeStyle=`hsl(${110-l.y*0.4},45%,${25+l.depth*20}%)`;
        ctx.lineWidth=2*l.depth;

        ctx.beginPath();
        ctx.moveTo(cx,y);
        ctx.quadraticCurveTo(
            cx-width/2+sway,
            y+8,
            cx-width+sway,
            y
        );
        ctx.moveTo(cx,y);
        ctx.quadraticCurveTo(
            cx+width/2+sway,
            y+8,
            cx+width+sway,
            y
        );
        ctx.stroke();
    }

    ctx.fillStyle='#5a3a1a';
    ctx.fillRect(cx-12,base,24,40);

    const glow=Math.sin(Date.now()*0.002)*15+25;
    ctx.shadowColor='#ffd166';
    ctx.shadowBlur=glow;
    ctx.fillStyle='#ffd166';
    ctx.beginPath();
    ctx.arc(cx,base-grow*4-18,10,0,Math.PI*2);
    ctx.fill();
    ctx.restore();

    if(grow<layers.length) grow+=0.5;
}

function animate(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    drawSnow();
    drawTree3D();
    requestAnimationFrame(animate);
}
animate();
</script>
<script>
/* ================= LIGHTS ================= */
function drawLights(){
    const cx=canvas.width/2;
    const base=canvas.height*0.78;
    const t=Date.now()*0.002;
    for(let i=0;i<60;i++){
        const y=base-i*6;
        const spread=220-i*1.5;
        const x=cx-spread/2+Math.sin(i*0.7)*spread*0.4;
        ctx.fillStyle=`hsl(${(i*40+t*80)%360},100%,60%)`;
        ctx.beginPath();
        ctx.arc(x,y,3+Math.sin(t+i),0,Math.PI*2);
        ctx.fill();
    }
}

/* override animate */
const oldAnimate=animate;
function animate(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    drawSnow();
    drawTree3D();
    drawLights();
    requestAnimationFrame(animate);
}

/* ================= CARD ================= */
const gift=document.getElementById('gift');
const card=document.getElementById('card');
const textEl=document.getElementById('text');
const music=document.getElementById('music');

const message=`GiÃ¡ng Sinh láº¡i vá»,
mang theo Ã¡nh Ä‘Ã¨n áº¥m Ã¡p
vÃ  nhá»¯ng khoáº£nh kháº¯c ráº¥t riÃªng.

ChÃºc LÃ¢m Vy
má»™t mÃ¹a Noel tháº­t an yÃªn,
luÃ´n má»‰m cÆ°á»i dá»‹u dÃ ng,
vÃ  gáº·p tháº­t nhiá»u Ä‘iá»u tá»‘t Ä‘áº¹p.

Mong ráº±ng
má»—i ngÃ y trÃ´i qua
Ä‘á»u Ä‘á»§ áº¥m Ä‘á»ƒ nhá»›,
Ä‘á»§ vui Ä‘á»ƒ má»‰m cÆ°á»i.

Merry Christmas ðŸŽ„âœ¨`;

gift.onclick=()=>{
    gift.style.display='none';
    card.classList.add('show');
    music.volume=0;
    music.play();
    let v=0;
    const fade=setInterval(()=>{
        if(v<0.6){v+=0.01;music.volume=v}else clearInterval(fade);
    },200);
    typeWriter();
};

function typeWriter(){
    let i=0;
    function write(){
        if(i>=message.length) return;
        textEl.textContent+=message[i];
        let delay=55;
        if(message[i]==','||message[i]=='.') delay=350;
        if(message[i]=='\n') delay=500;
        i++;
        setTimeout(write,delay);
    }
    write();
}
</script>

</body>
</html>
