<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Merry Christmas</title>

<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:wght@400;600&family=Montserrat:wght@300;400&display=swap" rel="stylesheet">

<style>
html,body{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  overflow:hidden;
  background:radial-gradient(circle at top,#1c2f45,#050608);
  font-family:'Montserrat',sans-serif;
}

canvas{
  position:fixed;
  inset:0;
}

#scene{
  position:relative;
  width:100%;
  height:100%;
}

#gift{
  position:absolute;
  bottom:8%;
  left:50%;
  transform:translateX(-50%);
  width:150px;
  height:150px;
  cursor:pointer;
  z-index:10;
  animation:float 3.5s ease-in-out infinite;
}

@keyframes float{
  0%,100%{transform:translate(-50%,0)}
  50%{transform:translate(-50%,-22px)}
}

.gift-box{
  width:100%;
  height:100%;
  border-radius:18px;
  background:linear-gradient(135deg,#8b0000,#c1121f);
  box-shadow:0 0 50px rgba(255,0,0,.6);
  position:relative;
}

.gift-box::before,
.gift-box::after{
  content:'';
  position:absolute;
  background:#ffd166;
}

.gift-box::before{
  width:100%;
  height:18px;
  top:66px;
}

.gift-box::after{
  width:18px;
  height:100%;
  left:66px;
}

#cardOverlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.75);
  display:flex;
  align-items:center;
  justify-content:center;
  opacity:0;
  pointer-events:none;
  transition:1.8s ease;
  z-index:20;
}

#cardOverlay.show{
  opacity:1;
  pointer-events:auto;
}

.card{
  width:600px;
  padding:60px;
  border-radius:30px;
  background:linear-gradient(135deg,#fff,#fdf1d8);
  box-shadow:0 60px 150px rgba(0,0,0,.6);
  text-align:center;
  position:relative;
}

.card::before{
  content:'';
  position:absolute;
  inset:-5px;
  border-radius:34px;
  background:linear-gradient(45deg,#ffd166,#ef476f,#ffd166);
  z-index:-1;
  animation:borderGlow 12s linear infinite;
}

@keyframes borderGlow{
  0%{filter:hue-rotate(0deg)}
  100%{filter:hue-rotate(360deg)}
}

.card h1{
  font-family:'Great Vibes',cursive;
  font-size:60px;
  color:#c1121f;
  margin:0 0 20px;
}

.card h2{
  font-family:'Playfair Display',serif;
  font-size:22px;
  margin:0 0 30px;
  color:#333;
}

#message{
  font-size:16px;
  line-height:1.9;
  white-space:pre-line;
  min-height:220px;
  color:#333;
}

audio{display:none}
</style>
</head>

<body>

<div id="scene">
  <canvas id="canvas"></canvas>

  <div id="gift">
    <div class="gift-box"></div>
  </div>
</div>

<div id="cardOverlay">
  <div class="card">
    <h1>Merry Christmas</h1>
    <h2>Gá»­i Nguyá»…n Pháº¡m LÃ¢m Vy</h2>
    <div id="message"></div>
  </div>
</div>

<audio id="music" loop>
  <source src="https://cdn.pixabay.com/audio/2022/11/22/audio_1b1e6c8c1f.mp3">
</audio>

<script>
/* ================= CANVAS SETUP ================= */
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = innerWidth;
  canvas.height = innerHeight;
}
resize();
addEventListener("resize", resize);

/* ================= SNOW ================= */
const snow = [];
for(let i=0;i<500;i++){
  snow.push({
    x:Math.random()*canvas.width,
    y:Math.random()*canvas.height,
    r:Math.random()*2+1,
    s:Math.random()*1.5+0.4,
    o:Math.random()
  });
}

/* ================= TREE (FAKE 3D) ================= */
let grow = 0;
const branches = [];
for(let i=0;i<160;i++){
  branches.push({
    y:i,
    depth:Math.random()*0.6+0.4,
    sway:Math.random()*Math.PI*2
  });
}

function drawSnow(){
  snow.forEach(f=>{
    ctx.fillStyle=`rgba(255,255,255,${0.3+f.o})`;
    ctx.beginPath();
    ctx.arc(f.x,f.y,f.r,0,Math.PI*2);
    ctx.fill();
    f.y+=f.s;
    f.x+=Math.sin(f.y*0.01)*0.3;
    if(f.y>canvas.height){
      f.y=-10;
      f.x=Math.random()*canvas.width;
    }
  });
}

function drawTree(){
  const cx = canvas.width/2;
  const base = canvas.height*0.78;
  ctx.save();
  ctx.lineCap="round";

  for(let i=0;i<grow;i++){
    const b = branches[i];
    const y = base - b.y*4;
    const w = (240 - b.y*1.6) * b.depth;
    const sway = Math.sin(Date.now()*0.001 + b.sway) * 8 * b.depth;

    ctx.strokeStyle = `hsl(${110-b.y*0.4},45%,${25+b.depth*20}%)`;
    ctx.lineWidth = 2*b.depth;

    ctx.beginPath();
    ctx.moveTo(cx,y);
    ctx.quadraticCurveTo(cx-w/2+sway,y+10,cx-w+sway,y);
    ctx.moveTo(cx,y);
    ctx.quadraticCurveTo(cx+w/2+sway,y+10,cx+w+sway,y);
    ctx.stroke();
  }

  ctx.fillStyle="#5a3a1a";
  ctx.fillRect(cx-14,base,28,45);

  ctx.shadowColor="#ffd166";
  ctx.shadowBlur=30+Math.sin(Date.now()*0.002)*10;
  ctx.fillStyle="#ffd166";
  ctx.beginPath();
  ctx.arc(cx,base-grow*4-22,12,0,Math.PI*2);
  ctx.fill();

  ctx.restore();
  if(grow<branches.length) grow+=0.6;
}

function animate(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawSnow();
  drawTree();
  requestAnimationFrame(animate);
}
animate();
</script>
<script>
/* ================= LIGHTS ================= */
function drawLights(){
  const cx = canvas.width/2;
  const base = canvas.height*0.78;
  const t = Date.now()*0.002;
  for(let i=0;i<70;i++){
    const y = base - i*6;
    const spread = 240 - i*1.6;
    const x = cx - spread/2 + Math.sin(i*0.7)*spread*0.45;
    ctx.fillStyle = `hsl(${(i*45+t*90)%360},100%,60%)`;
    ctx.beginPath();
    ctx.arc(x,y,3+Math.sin(t+i),0,Math.PI*2);
    ctx.fill();
  }
}

const oldAnimate = animate;
function animate(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawSnow();
  drawTree();
  drawLights();
  requestAnimationFrame(animate);
}

/* ================= GIFT + CARD ================= */
const gift = document.getElementById("gift");
const overlay = document.getElementById("cardOverlay");
const msgEl = document.getElementById("message");
const music = document.getElementById("music");

const message = 
`GiÃ¡ng Sinh láº¡i vá» rá»“i â„ï¸

Mang theo Ã¡nh Ä‘Ã¨n áº¥m Ã¡p
vÃ  nhá»¯ng khoáº£nh kháº¯c ráº¥t dá»‹u dÃ ng.

ChÃºc LÃ¢m Vy
má»™t mÃ¹a Noel tháº­t an yÃªn,
luÃ´n má»‰m cÆ°á»i nháº¹ nhÃ ng,
vÃ  gáº·p tháº­t nhiá»u Ä‘iá»u tá»‘t Ä‘áº¹p.

Mong ráº±ng
nhá»¯ng ngÃ y cuá»‘i nÄƒm
sáº½ Ä‘á»§ áº¥m Ä‘á»ƒ nhá»›,
Ä‘á»§ vui Ä‘á»ƒ má»‰m cÆ°á»i.

Merry Christmas ðŸŽ„âœ¨`;

gift.onclick = ()=>{
  gift.style.display="none";
  overlay.classList.add("show");

  music.volume = 0;
  music.play();
  let v = 0;
  const fade = setInterval(()=>{
    if(v<0.6){ v+=0.01; music.volume=v; }
    else clearInterval(fade);
  },200);

  typeWriter();
};

/* ================= TYPE WRITER ================= */
function typeWriter(){
  let i = 0;
  msgEl.textContent = "";
  function write(){
    if(i>=message.length) return;
    msgEl.textContent += message[i];
    let delay = 55;
    if(message[i]=="," || message[i]==".") delay = 350;
    if(message[i]=="\n") delay = 500;
    i++;
    setTimeout(write,delay);
  }
  write();
}
</script>

</body>
</html>
