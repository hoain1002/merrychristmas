<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Merry Christmas ðŸŽ„</title>

<!-- GOOGLE FONTS -->
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:wght@400;600&family=Montserrat:wght@300;400&display=swap" rel="stylesheet">

<style>
/* ================= RESET ================= */
*{margin:0;padding:0;box-sizing:border-box}
html,body{
    width:100%;
    height:100%;
    overflow:hidden;
    background:radial-gradient(circle at top,#1b2735,#090a0f);
    font-family:'Montserrat',sans-serif;
    color:#fff;
}

/* ================= CANVAS ================= */
canvas{
    position:fixed;
    inset:0;
    z-index:1;
}

/* ================= SANTA ================= */
#santa{
    position:absolute;
    top:15%;
    left:-300px;
    font-size:80px;
    z-index:4;
    animation:santaFly 20s linear infinite;
}
@keyframes santaFly{
    0%{transform:translateX(-300px)}
    100%{transform:translateX(calc(100vw + 300px))}
}

/* ================= GIFT ================= */
#gift{
    position:absolute;
    bottom:10%;
    left:50%;
    transform:translateX(-50%);
    width:130px;
    height:130px;
    cursor:pointer;
    z-index:5;
    animation:giftFloat 3s ease-in-out infinite;
}
@keyframes giftFloat{
    0%,100%{transform:translate(-50%,0)}
    50%{transform:translate(-50%,-18px)}
}
#gift .box{
    width:100%;
    height:100%;
    background:linear-gradient(135deg,#780000,#c1121f);
    border-radius:14px;
    box-shadow:0 0 40px rgba(255,0,0,.6);
}
#gift::before,#gift::after{
    content:'';
    position:absolute;
    background:#ffd166;
}
#gift::before{width:100%;height:18px;top:56px}
#gift::after{width:18px;height:100%;left:56px}

/* ================= CARD ================= */
#card{
    position:fixed;
    inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
    background:rgba(0,0,0,.75);
    opacity:0;
    pointer-events:none;
    transition:1.5s;
    z-index:10;
}
#card.show{opacity:1;pointer-events:auto}

.card-inner{
    width:560px;
    padding:55px;
    background:
      linear-gradient(135deg,#fff,#fdf0d5),
      url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><rect width="200" height="200" fill="%23fdf0d5"/><circle cx="20" cy="20" r="1" fill="%23e6d8b8"/></svg>');
    color:#333;
    border-radius:28px;
    text-align:center;
    position:relative;
    box-shadow:0 50px 120px rgba(0,0,0,.45);
    animation:cardIn 1.5s ease forwards;
}
@keyframes cardIn{
    from{transform:translateY(60px) scale(.95);opacity:0}
    to{transform:none;opacity:1}
}
.card-inner::before{
    content:'';
    position:absolute;
    inset:-4px;
    border-radius:32px;
    background:linear-gradient(45deg,#ffd166,#ef476f,#ffd166);
    z-index:-1;
    animation:borderGlow 8s linear infinite;
}
@keyframes borderGlow{
    0%{filter:hue-rotate(0deg)}
    100%{filter:hue-rotate(360deg)}
}

.card-title{
    font-family:'Great Vibes',cursive;
    font-size:56px;
    color:#c1121f;
    margin-bottom:20px;
}
.card-name{
    font-family:'Playfair Display',serif;
    font-size:22px;
    margin-bottom:25px;
}
.card-message{
    font-size:16px;
    line-height:1.9;
    white-space:pre-line;
    min-height:180px;
}

/* ================= MOBILE ================= */
@media(max-width:600px){
    .card-inner{width:90%;padding:40px}
    .card-title{font-size:44px}
}
</style>
</head>

<body>

<canvas id="canvas"></canvas>

<div id="santa">ðŸŽ…ðŸ¦ŒðŸ¦Œ</div>

<div id="gift">
    <div class="box"></div>
</div>

<div id="card">
    <div class="card-inner">
        <div class="card-title">Merry Christmas</div>
        <div class="card-name">Gá»­i Nguyá»…n Pháº¡m LÃ¢m Vy</div>
        <div id="message" class="card-message"></div>
    </div>
</div>

<audio id="music" loop>
  <source src="https://cdn.pixabay.com/audio/2022/11/22/audio_1b1e6c8c1f.mp3">
</audio>
<script>
/* ================= CANVAS ================= */
const canvas=document.getElementById('canvas');
const ctx=canvas.getContext('2d');
function resize(){
  canvas.width=innerWidth;
  canvas.height=innerHeight;
}
resize();
addEventListener('resize',resize);

/* ================= SNOW 3 LAYERS ================= */
const snow=[];
for(let i=0;i<350;i++){
  snow.push({
    x:Math.random()*canvas.width,
    y:Math.random()*canvas.height,
    r:Math.random()*3+1,
    s:Math.random()*1.5+0.5,
    d:Math.random()*Math.PI*2
  });
}
function drawSnow(){
  ctx.fillStyle='white';
  snow.forEach(s=>{
    ctx.beginPath();
    ctx.arc(s.x,s.y,s.r,0,Math.PI*2);
    ctx.fill();
    s.y+=s.s;
    s.x+=Math.sin(s.d)*0.3;
    s.d+=0.01;
    if(s.y>canvas.height){
      s.y=-10;
      s.x=Math.random()*canvas.width;
    }
  });
}

/* ================= TREE ================= */
let treeStep=0;
function drawTree(){
  const cx=canvas.width/2;
  const base=canvas.height*0.75;

  ctx.save();
  ctx.strokeStyle='#1b5e20';
  ctx.lineWidth=3;
  ctx.lineCap='round';

  ctx.beginPath();
  for(let i=0;i<treeStep;i++){
    const y=base-i*4;
    const spread=200-i*1.3;
    ctx.moveTo(cx,y);
    ctx.quadraticCurveTo(cx-spread/2,y+8,cx-spread,y);
    ctx.moveTo(cx,y);
    ctx.quadraticCurveTo(cx+spread/2,y+8,cx+spread,y);
  }
  ctx.stroke();

  ctx.fillStyle='#5a3a1a';
  ctx.fillRect(cx-12,base,24,40);

  const glow=Math.sin(Date.now()/400)*12+20;
  ctx.shadowColor='#ffd166';
  ctx.shadowBlur=glow;
  ctx.fillStyle='#ffd166';
  ctx.beginPath();
  ctx.arc(cx,base-treeStep*4-18,9,0,Math.PI*2);
  ctx.fill();

  ctx.restore();
  if(treeStep<130) treeStep+=0.5;
}

/* ================= LIGHTS ================= */
function drawLights(){
  const cx=canvas.width/2;
  const base=canvas.height*0.75;
  const t=Date.now()/700;
  for(let i=0;i<45;i++){
    const y=base-i*7;
    const spread=200-i*1.4;
    const x=cx-spread/2+Math.sin(i)*spread*0.5;
    ctx.fillStyle=`hsl(${(i*30+t*60)%360},100%,60%)`;
    ctx.beginPath();
    ctx.arc(x,y,3+Math.sin(t+i),0,Math.PI*2);
    ctx.fill();
  }
}

/* ================= ANIMATE ================= */
function animate(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawSnow();
  drawTree();
  drawLights();
  requestAnimationFrame(animate);
}
animate();

/* ================= CARD & TEXT ================= */
const gift=document.getElementById('gift');
const card=document.getElementById('card');
const msgEl=document.getElementById('message');
const music=document.getElementById('music');

const text=
`GiÃ¡ng Sinh láº¡i vá»,
mang theo nhá»¯ng Ã¡nh Ä‘Ã¨n dá»‹u dÃ ng
vÃ  khÃ´ng khÃ­ áº¥m Ã¡p ráº¥t riÃªng.

ChÃºc LÃ¢m Vy
má»™t mÃ¹a Noel tháº­t bÃ¬nh yÃªn,
luÃ´n má»‰m cÆ°á»i tháº­t nhiá»u,
vÃ  gáº·p tháº­t nhiá»u Ä‘iá»u tá»‘t Ä‘áº¹p.

Mong ráº±ng
nhá»¯ng khoáº£nh kháº¯c nhá»
Ä‘á»u Ä‘á»§ áº¥m Ä‘á»ƒ nhá»›,
Ä‘á»§ vui Ä‘á»ƒ má»‰m cÆ°á»i.

Merry Christmas ðŸŽ„âœ¨`;

gift.onclick=()=>{
  gift.style.display='none';
  card.classList.add('show');
  music.volume=0;
  music.play();
  let v=0;
  const fade=setInterval(()=>{
    if(v<0.6){v+=0.01;music.volume=v}
    else clearInterval(fade);
  },200);
  typeText();
};

function typeText(){
  let i=0;
  const timer=setInterval(()=>{
    msgEl.textContent+=text[i];
    if(text[i]==','||text[i]=='.') clearInterval(timer),setTimeout(typeText,300);
    i++;
    if(i>=text.length) clearInterval(timer);
  },60);
}
</script>

</body>
</html>
